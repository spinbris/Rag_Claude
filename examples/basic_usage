
"""Example usage of the RAG system."""

from rag_system import RAGSystem


def main():
    # Initialize the RAG system
    rag = RAGSystem()
    
    # Load various sources
    rag.load_website("https://en.wikipedia.org/wiki/Python_(programming_language)")
    rag.load_pdf("example.pdf")
    rag.load_docx("document.docx")
    rag.load_csv("data.csv")
    rag.load_txt("notes.txt")
    rag.load_markdown("README.md")
    
    # Or use auto-detection
    rag.load_file("some_file.pdf")  # Automatically detects file type
    
    # Save the index
    rag.save("rag_index.pkl")
    
    # Query the system
    question = "What is Python used for?"
    answer = rag.query(question)
    print(f"\nQuestion: {question}")
    print(f"Answer: {answer}")
    
    # Search for relevant documents
    results = rag.search("machine learning", top_k=3)
    print("\n--- Search Results ---")
    for i, result in enumerate(results):
        print(f"\n{i+1}. Score: {result['score']:.3f}")
        print(f"Source: {result['source']}")
        print(f"Type: {result['type']}")
        print(f"Content preview: {result['content'][:200]}...")
    
    # Get system stats
    stats = rag.get_stats()
    print("\n--- System Stats ---")
    for key, value in stats.items():
        print(f"{key}: {value}")


if __name__ == "__main__":
    main()